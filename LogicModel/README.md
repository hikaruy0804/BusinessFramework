# Logic Model Creator

ロジックモデルを視覚的に作成・編集するためのウェブアプリケーションです。事業やプロジェクトの論理的な流れを、直感的なドラッグ＆ドロップ操作で構築できます。

## 🌟 主な機能

### 📝 項目管理
- **項目追加**: 6つのステージ（インプット、アクティビティ、アウトプット、短期アウトカム、中期アウトカム、インパクト）に項目を追加
- **項目編集**: ダブルクリックで項目の内容とステージを編集
- **文字数制限**: 項目は30文字以内で入力（リアルタイム文字数表示付き）
- **項目削除**: 編集モーダルから項目と関連する矢印を一括削除

### 🔗 接続機能
- **論理的接続**: 隣接するステージ間のみ矢印で接続可能
- **視覚的ガイド**: 接続開始時に接続可能な項目をハイライト表示
- **方向制限**: 左から右（インプット→インパクト）の方向のみ接続可能
- **接続削除**: 矢印をダブルクリックで削除

### 💾 データ管理
- **自動保存**: ローカルストレージに自動保存
- **JSON出力**: データをJSONファイルとして保存
- **JSON読込**: 保存したJSONファイルを読み込み
- **PNG出力**: ロジックモデルを高品質なPNG画像として出力

### 🎨 ユーザーインターフェース
- **レスポンシブデザイン**: デスクトップ・タブレット・モバイル対応
- **カラーコード**: ステージごとに色分けされた視覚的な分類
- **アニメーション**: スムーズなインタラクション効果
- **非侵入的メッセージ**: 右下に表示される控えめな通知

## 🚀 使い方

### 基本操作

1. **項目の追加**
   - 「＋項目追加」ボタンをクリック
   - 内容を入力（30文字以内）
   - ステージを選択して「追加」

2. **項目の編集**
   - 項目をダブルクリック
   - 内容やステージを変更して「保存」

3. **矢印の作成**
   - 開始項目をクリック（緑色でハイライトされた項目が接続可能）
   - 接続先項目をクリック
   - 背景クリックまたはEscキーでキャンセル

4. **矢印の削除**
   - 矢印をダブルクリックして削除確認

### データの保存・読込

- **データ保存**: 「データ保存」ボタンでJSONファイルをダウンロード
- **データ読込**: 「データ読込」ボタンでJSONファイルを選択
- **PNG出力**: 「PNG出力」ボタンで画像ファイルをダウンロード

## 🏗️ 技術仕様

### フロントエンド技術
- **HTML5**: セマンティックなマークアップ
- **CSS3**: Flexbox、アニメーション、レスポンシブデザイン
- **JavaScript (ES6+)**: モダンなJavaScript機能を活用

### 外部ライブラリ
- **[D3.js v7](https://d3js.org/)**: SVG描画とDOM操作
- **[UUID v8](https://github.com/uuidjs/uuid)**: 一意ID生成
- **[FileSaver.js](https://github.com/eligrey/FileSaver.js/)**: ファイルダウンロード

### アーキテクチャ
- **クライアントサイド**: サーバー不要の完全なクライアントサイドアプリケーション
- **データ永続化**: ローカルストレージによる自動保存
- **モジュラー設計**: 機能ごとに分離された関数構造

## 📊 データ構造

```javascript
{
  "version": "1.0",
  "timestamp": "2024-01-01T00:00:00.000Z",
  "data": {
    "items": [
      {
        "id": "uuid-string",
        "text": "項目の内容",
        "category": "inputs|activities|outputs|short_outcomes|middle_outcomes|impact",
        "x": 100,
        "y": 200
      }
    ],
    "connections": [
      {
        "id": "uuid-string",
        "source": "source-item-id",
        "target": "target-item-id"
      }
    ]
  }
}
```

## 🎯 ステージ定義

| ステージ | 説明 | 色 |
|---------|------|-----|
| インプット | 投入する資源・リソース | 🟡 黄色 |
| アクティビティ | 実施する活動・取り組み | 🟠 オレンジ |
| アウトプット | 活動の直接的な成果物 | 🟣 紫色 |
| 短期アウトカム | 短期的な変化・効果 | 🟢 緑色 |
| 中期アウトカム | 中期的な変化・効果 | 🔵 青色 |
| インパクト | 長期的・社会的な影響 | 🩷 ピンク |

## 🔧 接続ルール

### ✅ 許可される接続
- インプット → アクティビティ
- アクティビティ → アウトプット
- アウトプット → 短期アウトカム
- 短期アウトカム → 中期アウトカム
- 中期アウトカム → インパクト

### ❌ 禁止される接続
- 同じステージ内での接続
- ステージを飛ばした接続
- 逆方向の接続
- インパクトからの接続

## 🖥️ 動作環境

### 推奨ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 画面解像度
- デスクトップ: 1024px以上推奨
- タブレット: 768px〜1023px
- モバイル: 320px〜767px

## 📁 ファイル構成

```
LogicModel/
├── index.html          # メインHTMLファイル
├── style.css           # スタイルシート
├── script.js           # JavaScriptロジック
├── sample-logic-model.json  # サンプルデータ
├── README.md           # このファイル
├── 使い方.txt          # 使用方法の説明
└── .gitignore          # Git除外設定
```

## 🚀 セットアップ

1. **ファイルのダウンロード**
   ```bash
   git clone [repository-url]
   cd LogicModel
   ```

2. **ローカルサーバーの起動**（推奨）
   ```bash
   # Python 3の場合
   python -m http.server 8000
   
   # Node.jsの場合
   npx serve .
   ```

3. **ブラウザでアクセス**
   ```
   http://localhost:8000
   ```

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します。改善提案がある場合は、お気軽にお知らせください。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🔄 更新履歴

### v1.2.0 (最新)
- 隣接ステージのみの接続制限を追加
- 文字数制限（30文字）を実装
- メッセージ表示位置を改善
- PNG出力機能を強化
- 視覚的フィードバックを改善

### v1.1.0
- ステージ変更機能を追加
- レスポンシブデザインを改善
- 自動保存機能を実装

### v1.0.0
- 初回リリース
- 基本的なロジックモデル作成機能